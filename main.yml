version: 0.2

name: Upload Website

on:
   push:
      branches:
         - main

jobs:
   deploy:
      runs-on: ubuntu-latest
      steps:
         - name: Setup Node.js environment
           uses: actions/setup-node@v3
           with:
              node-version: 16
         # - name: Build React app
         #   run: npm run build
         - name: Checkout code
           uses: actions/checkout@v3

         - name: Build React App
           run: npm install && npm run build
         - name: Deploy app build to S3 bucket
           run: aws s3 cp --recursive ./build/ s3://${{ env.AWS_S3_BUCKET }}/

env:
   AWS_S3_BUCKET: ${{ secrets.AWS_S3_BUCKET }}
   AWS_S3_ARTIFACT: ${{ secrets.AWS_S3_ARTIFACT }}
   AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
   AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
# artifacts:
#    name: aws s3 artifacts
#    files:
#       - "build/*"

# artifacts:
#    files:
#       - ./*
#    discard-paths: yes
